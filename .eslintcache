[{"/Users/surabhigovil/file_storage/src/index.js":"1","/Users/surabhigovil/file_storage/src/aws-exports.js":"2","/Users/surabhigovil/file_storage/src/App.js":"3","/Users/surabhigovil/file_storage/src/reportWebVitals.js":"4","/Users/surabhigovil/file_storage/src/UserFiles.js":"5","/Users/surabhigovil/file_storage/src/graphql/mutations.js":"6","/Users/surabhigovil/file_storage/src/graphql/queries.js":"7","/Users/surabhigovil/file_storage/src/Users.js":"8","/Users/surabhigovil/file_storage/src/graphql/subscriptions.js":"9","/Users/surabhigovil/file_storage/src/components/navbar.js":"10"},{"size":600,"mtime":1607556266402,"results":"11","hashOfConfig":"12"},{"size":799,"mtime":1607150150191,"results":"13","hashOfConfig":"12"},{"size":143,"mtime":1607288035479,"results":"14","hashOfConfig":"12"},{"size":362,"mtime":1607065115053,"results":"15","hashOfConfig":"12"},{"size":2641,"mtime":1607072467327,"results":"16","hashOfConfig":"12"},{"size":3175,"mtime":1607150147042,"results":"17","hashOfConfig":"12"},{"size":2034,"mtime":1607150146892,"results":"18","hashOfConfig":"12"},{"size":9872,"mtime":1607726725982,"results":"19","hashOfConfig":"12"},{"size":2233,"mtime":1607150147141,"results":"20","hashOfConfig":"12"},{"size":777,"mtime":1607725566360,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"1u3zevm",{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"33","usedDeprecatedRules":"34"},{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":15,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"24"},"/Users/surabhigovil/file_storage/src/index.js",[],["45","46"],"/Users/surabhigovil/file_storage/src/aws-exports.js",[],"/Users/surabhigovil/file_storage/src/App.js",[],"/Users/surabhigovil/file_storage/src/reportWebVitals.js",[],"/Users/surabhigovil/file_storage/src/UserFiles.js",["47","48"],"import React, { useState, useReducer, useEffect } from 'react'\nimport { AmplifySignOut, withAuthenticator } from '@aws-amplify/ui-react';\nimport Amplify, {Auth, Storage, API, graphqlOperation } from 'aws-amplify'\nimport { v4 as uuid } from 'uuid'\n\nimport { createUserFiles as CreateUserFiles } from './graphql/mutations'\nimport { listUserFiless as ListUserFiles } from './graphql/queries'\nimport config from './aws-exports'\n\nAmplify.configure(config);\n\nconst {\n  aws_user_files_s3_bucket_region: region,\n  aws_user_files_s3_bucket: bucket\n} = config\n\nfunction App() {\n  const [file, updateFile] = useState(null)\n  const [fileName, updateFileName] = useState('')\n  const [files, updateFiles] = useState([])\n  useEffect(() => {\n    listUserFiles()\n  }, [])\n  \n  async function listUserFiles() {\n    const files = await API.graphql(graphqlOperation(ListUserFiles))\n    updateFiles(files.data.listUserFiless.items)\n  }\n\n  function handleChange(event) {\n    const { target: { value, files } } = event\n    const fileForUpload = files[0]\n    updateFileName(fileForUpload.name[0])\n    updateFile(fileForUpload || value)\n  }\n\n  async function createUserFiles(event) {\n    event.preventDefault()\n    if (file) {\n      const extension = file.name.split(\".\")[1]\n      const { type: mimeType } = file\n      const key = `images/${uuid()}${fileName}.${extension}`      \n      const url = `https://${bucket}.s3.${region}.amazonaws.com/public/${key}`\n      const inputData = { name: fileName , image: url }\n      \n      try {\n        await Storage.put(key, file, {\n          contentType: mimeType\n        })\n        await API.graphql(graphqlOperation(CreateUserFiles, { input: inputData }))\n        console.log('successfully created file!')\n      } catch (err) {\n        console.log('error: ', err)\n      }\n    }\n  }\n\n  return (\n    <div style={styles.container}>\n      <input\n        type=\"file\"\n        onChange={handleChange}\n        style={{margin: '10px 0px'}}\n      />\n      <input\n        placeholder='File Name'\n        value={fileName}\n        onChange={e => updateFileName(e.target.value)}\n      />\n      <button\n        style={styles.button}\n        onClick={createUserFiles}>Create File</button>\n\n      {\n        files.map((p, i) => (\n          <p>{p.name}</p>\n        ))\n      }\n      <AmplifySignOut />\n    </div>\n  );\n}\n\nconst styles = {\n  container: {\n    width: 400,\n    margin: '0 auto',\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  image: {\n    width: 400\n  },\n  button: {\n    width: 200,\n    backgroundColor: '#ddd',\n    cursor: 'pointer',\n    height: 30,\n    margin: '0px 0px 8px'\n  }\n}\n\nexport default withAuthenticator(App);",["49","50"],"/Users/surabhigovil/file_storage/src/graphql/mutations.js",[],"/Users/surabhigovil/file_storage/src/graphql/queries.js",[],"/Users/surabhigovil/file_storage/src/Users.js",["51","52","53","54","55","56","57","58","59","60","61","62","63","64","65"],"/Users/surabhigovil/file_storage/src/graphql/subscriptions.js",[],"/Users/surabhigovil/file_storage/src/components/navbar.js",[],{"ruleId":"66","replacedBy":"67"},{"ruleId":"68","replacedBy":"69"},{"ruleId":"70","severity":1,"message":"71","line":1,"column":27,"nodeType":"72","messageId":"73","endLine":1,"endColumn":37},{"ruleId":"70","severity":1,"message":"74","line":3,"column":18,"nodeType":"72","messageId":"73","endLine":3,"endColumn":22},{"ruleId":"66","replacedBy":"75"},{"ruleId":"68","replacedBy":"76"},{"ruleId":"70","severity":1,"message":"77","line":2,"column":25,"nodeType":"72","messageId":"73","endLine":2,"endColumn":28},{"ruleId":"70","severity":1,"message":"78","line":4,"column":29,"nodeType":"72","messageId":"73","endLine":4,"endColumn":43},{"ruleId":"70","severity":1,"message":"79","line":4,"column":45,"nodeType":"72","messageId":"73","endLine":4,"endColumn":65},{"ruleId":"70","severity":1,"message":"80","line":4,"column":67,"nodeType":"72","messageId":"73","endLine":4,"endColumn":80},{"ruleId":"70","severity":1,"message":"81","line":5,"column":8,"nodeType":"72","messageId":"73","endLine":5,"endColumn":15},{"ruleId":"70","severity":1,"message":"82","line":9,"column":21,"nodeType":"72","messageId":"73","endLine":9,"endColumn":30},{"ruleId":"70","severity":1,"message":"83","line":47,"column":20,"nodeType":"72","messageId":"73","endLine":47,"endColumn":31},{"ruleId":"70","severity":1,"message":"84","line":72,"column":11,"nodeType":"72","messageId":"73","endLine":72,"endColumn":14},{"ruleId":"85","severity":1,"message":"86","line":93,"column":24,"nodeType":"87","messageId":"88","endLine":93,"endColumn":26},{"ruleId":"89","severity":1,"message":"90","line":94,"column":18,"nodeType":"91","messageId":"92","endLine":94,"endColumn":20},{"ruleId":"85","severity":1,"message":"86","line":123,"column":27,"nodeType":"87","messageId":"88","endLine":123,"endColumn":29},{"ruleId":"70","severity":1,"message":"93","line":189,"column":9,"nodeType":"72","messageId":"73","endLine":189,"endColumn":12},{"ruleId":"70","severity":1,"message":"94","line":215,"column":18,"nodeType":"72","messageId":"73","endLine":215,"endColumn":25},{"ruleId":"70","severity":1,"message":"95","line":227,"column":11,"nodeType":"72","messageId":"73","endLine":227,"endColumn":15},{"ruleId":"96","severity":1,"message":"97","line":244,"column":6,"nodeType":"98","endLine":244,"endColumn":8,"suggestions":"99"},"no-native-reassign",["100"],"no-negated-in-lhs",["101"],"no-unused-vars","'useReducer' is defined but never used.","Identifier","unusedVar","'Auth' is defined but never used.",["100"],["101"],"'Nav' is defined but never used.","'AmplifySignOut' is defined but never used.","'AmplifyAuthenticator' is defined but never used.","'AmplifySignIn' is defined but never used.","'Amplify' is defined but never used.","'listFiles' is defined but never used.","'setUsername' is assigned a value but never used.","'res' is assigned a value but never used.","array-callback-return","Array.prototype.map() expects a return value from arrow function.","ArrowFunctionExpression","expectedInside","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","'obj' is assigned a value but never used.","'signOut' is defined but never used.","'user' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'getUsersRegistered'. Either include it or remove the dependency array.","ArrayExpression",["102"],"no-global-assign","no-unsafe-negation",{"desc":"103","fix":"104"},"Update the dependencies array to be: [getUsersRegistered]",{"range":"105","text":"106"},[7109,7111],"[getUsersRegistered]"]